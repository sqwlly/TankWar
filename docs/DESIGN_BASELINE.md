# TanksCpp 设计基线（已确认）

## 产品边界

- 类型：经典《坦克大战》复刻 + 现代化改良（不做玩法大改）
- 平台/输入：PC（键盘/鼠标为主）
- 受众：休闲大众
- 商业化：免费开源，无广告/无内购
- 联网：不需要（离线单机）

## 核心体验目标（KISS）

- 开箱即玩：默认键位合理、流程清晰、失败可快速重开
- 手感稳定：固定逻辑分辨率 + 整数倍缩放，避免像素拉伸模糊
- 可回归：关键玩法（移动/碰撞/射击/暂停/重开）具备可自动化回归测试

## 输入规范（默认）

- P1：`W/A/S/D` 移动，`Space` 开火
- P2（同屏合作）：方向键移动，`Enter`/`KP Enter`/`Right Ctrl` 开火
- `ESC`：暂停/恢复；暂停态提供“继续/重开/回主菜单”

## 分辨率与缩放策略

- 逻辑分辨率：以 `Constants::WINDOW_WIDTH/HEIGHT` 为准（游戏逻辑基于该坐标系）
- 输出缩放：仅允许整数倍缩放 `1x/2x/3x/4x`
- 非整数窗口尺寸：letterbox（黑边），不做任意拉伸
- 支持窗口化 + 真全屏

## 状态流（建议）

- `Menu` → `Stage`（选关/玩家数/设置入口）→ `Playing` → `Score` → `Menu`
- `Playing`：
  - `ESC` 进入 `PauseOverlay`（继续/重开/回主菜单）
  - `GameOver` 显示 `GameOverOverlay`（重开/回主菜单）
- `Construction`：保留作为开发工具入口（可隐藏到“开发者/编辑器”子菜单或二次确认）

## 现代化改良优先级（已确认）

- P0：暂停菜单（继续/重开/回主菜单）+ GAME OVER 可重开
- P0：按键可重映射（本地保存）
- P1：设置（音量/缩放）+ 新手提示（HUD/按键提示）

## 素材版权策略

- 仓库内仅保留可再分发资源（自制/CC0/CC-BY 等）
- 若现有素材版权不清晰：发布版本使用可替换资源包/占位资源，避免侵权风险

## 测试策略（离线、确定性）

- 单元测试优先覆盖：输入映射、暂停/重开、碰撞/刷怪规则等关键路径
- 使用 `IInput` + `ScriptedInput` 实现“无 SDL 事件依赖”的可控输入回放

